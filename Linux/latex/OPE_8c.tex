\hypertarget{OPE_8c}{}\section{Riferimenti per il file Server/\+O\+PE.c}
\label{OPE_8c}\index{Server/\+O\+P\+E.\+c@{Server/\+O\+P\+E.\+c}}


Gestisce il comando O\+P\+E(\+N)  


{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$ctype.\+h$>$}\\*
{\ttfamily \#include \char`\"{}inc/\+O\+P\+E.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Heartbeating.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Strutture\+Dati.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+C\+L\+O\+S\+E.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Config.\+h\char`\"{}}\\*
{\ttfamily \#include $<$limits.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$sys/socket.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$netinet/in.\+h$>$}\\*
{\ttfamily \#include $<$arpa/inet.\+h$>$}\\*
\subsection*{Definizioni}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{OPE_8c_abf5dc13ad8c5442a46d67adb678d1541}{P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE}~14
\end{DoxyCompactItemize}
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{OPE_8c_a14798837102781498ee08e3c4cf5561c}{get\+Modo} (char $\ast$command)
\begin{DoxyCompactList}\small\item\em Ritorna il modo dalla stringa del comando. \end{DoxyCompactList}\item 
int \hyperlink{OPE_8c_abe1808712348b8e60af0a99293115f87}{create\+Control\+Sock} (int port\+No, int transfer\+Socket\+Id, \hyperlink{structOpenedFile}{Opened\+File} $\ast$file)
\begin{DoxyCompactList}\small\item\em crea connessione di controllo (heartbeating e invalidazione) lato server \end{DoxyCompactList}\item 
void \hyperlink{OPE_8c_a6eccb6ec6ec9c8375e70ab4088b511a5}{handle\+Open\+Command} (char $\ast$command, int socket)
\begin{DoxyCompactList}\small\item\em Gestisce il comando Open. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Descrizione dettagliata}
Gestisce il comando O\+P\+E(\+N) 

Quando il client invia un comando O\+P\+EN, questo modulo lo gestisce\+: ~\newline

\begin{DoxyItemize}
\item Controllando che il file richiesto non sia gia\textquotesingle{} stato aperto da qualcun\textquotesingle{}altro
\end{DoxyItemize}

Se non e\textquotesingle{} aperto, aggiunge un nodo in coda a main\+Opened\+File 

\subsection{Documentazione delle definizioni}
\index{O\+P\+E.\+c@{O\+P\+E.\+c}!P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE@{P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE}}
\index{P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE@{P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE}!O\+P\+E.\+c@{O\+P\+E.\+c}}
\subsubsection[{\texorpdfstring{P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE}{PRT_MSG_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE~14}\hypertarget{OPE_8c_abf5dc13ad8c5442a46d67adb678d1541}{}\label{OPE_8c_abf5dc13ad8c5442a46d67adb678d1541}


Referenziato da handle\+Open\+Command().



\subsection{Documentazione delle funzioni}
\index{O\+P\+E.\+c@{O\+P\+E.\+c}!create\+Control\+Sock@{create\+Control\+Sock}}
\index{create\+Control\+Sock@{create\+Control\+Sock}!O\+P\+E.\+c@{O\+P\+E.\+c}}
\subsubsection[{\texorpdfstring{create\+Control\+Sock(int port\+No, int transfer\+Socket\+Id, Opened\+File $\ast$file)}{createControlSock(int portNo, int transferSocketId, OpenedFile *file)}}]{\setlength{\rightskip}{0pt plus 5cm}int create\+Control\+Sock (
\begin{DoxyParamCaption}
\item[{int}]{port\+No, }
\item[{int}]{transfer\+Socket\+Id, }
\item[{{\bf Opened\+File} $\ast$}]{file}
\end{DoxyParamCaption}
)}\hypertarget{OPE_8c_abe1808712348b8e60af0a99293115f87}{}\label{OPE_8c_abe1808712348b8e60af0a99293115f87}


crea connessione di controllo (heartbeating e invalidazione) lato server 

\begin{DoxyReturn}{Restituisce}
0 se c\textquotesingle{}Ã¨ un errore, il socked descriptor del control socket altrimenti. 
\end{DoxyReturn}


Referenzia Opened\+File\+::control\+Socket\+Id, log\+M(), e sd.



Referenziato da handle\+Open\+Command().

\index{O\+P\+E.\+c@{O\+P\+E.\+c}!get\+Modo@{get\+Modo}}
\index{get\+Modo@{get\+Modo}!O\+P\+E.\+c@{O\+P\+E.\+c}}
\subsubsection[{\texorpdfstring{get\+Modo(char $\ast$command)}{getModo(char *command)}}]{\setlength{\rightskip}{0pt plus 5cm}int get\+Modo (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command}
\end{DoxyParamCaption}
)}\hypertarget{OPE_8c_a14798837102781498ee08e3c4cf5561c}{}\label{OPE_8c_a14798837102781498ee08e3c4cf5561c}


Ritorna il modo dalla stringa del comando. 



Referenziato da handle\+Open\+Command().

\index{O\+P\+E.\+c@{O\+P\+E.\+c}!handle\+Open\+Command@{handle\+Open\+Command}}
\index{handle\+Open\+Command@{handle\+Open\+Command}!O\+P\+E.\+c@{O\+P\+E.\+c}}
\subsubsection[{\texorpdfstring{handle\+Open\+Command(char $\ast$command, int socket)}{handleOpenCommand(char *command, int socket)}}]{\setlength{\rightskip}{0pt plus 5cm}void handle\+Open\+Command (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{int}]{socket}
\end{DoxyParamCaption}
)}\hypertarget{OPE_8c_a6eccb6ec6ec9c8375e70ab4088b511a5}{}\label{OPE_8c_a6eccb6ec6ec9c8375e70ab4088b511a5}


Gestisce il comando Open. 



Referenzia append\+Opened\+File(), close\+Client\+Session(), Opened\+File\+::control\+Socket\+Id, create\+Control\+Sock(), Opened\+File\+::file\+Name, Opened\+File\+::fp, get\+Modo(), getptid(), is\+Modo\+Apertura(), log\+M(), Opened\+File\+::modo, M\+Y\+O\+\_\+\+R\+D\+WR, M\+Y\+O\+\_\+\+W\+R\+O\+N\+LY, P\+R\+T\+\_\+\+M\+S\+G\+\_\+\+S\+I\+ZE, root\+Path, spawn\+Heart\+Beat(), strip\+Command(), e Opened\+File\+::transfer\+Socket\+Id.



Referenziato da handle\+Command().

