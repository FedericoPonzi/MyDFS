\hypertarget{Client_2READ_8c}{\section{Riferimenti per il file Client/\+R\+E\+A\+D.c}
\label{Client_2READ_8c}\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$sys/socket.\+h$>$}\\*
{\ttfamily \#include $<$netdb.\+h$>$}\\*
{\ttfamily \#include $<$netinet/in.\+h$>$}\\*
{\ttfamily \#include \char`\"{}inc/\+Config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+R\+E\+A\+D.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Cache.\+h\char`\"{}}\\*
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{Client_2READ_8c_a34f4cc3ee1ace86747c737cad2d801e7}{send\+Read\+Command} (\hyperlink{structMyDFSId}{My\+D\+F\+S\+Id} $\ast$id, int pos)
\begin{DoxyCompactList}\small\item\em Manda il comando di R\+E\+A\+D, e aspetta come risposta la dimensione di quanto deve leggere all'interno della risposta. \end{DoxyCompactList}\item 
int \hyperlink{Client_2READ_8c_a0b8dfa171c3b5c784fb6cba643728110}{read\+From} (\hyperlink{structMyDFSId}{My\+D\+F\+S\+Id} $\ast$id, int size\+Rimasta, int pos)
\begin{DoxyCompactList}\small\item\em Legge dalla socket di trasferimento buffsize dati. \end{DoxyCompactList}\item 
int \hyperlink{Client_2READ_8c_ad48e629c770d8352db6aa53fcbc3ece7}{byte\+Mancanti} (F\+I\+L\+E $\ast$fp)
\begin{DoxyCompactList}\small\item\em Torna il numero di byte prima della fine del file puntato da fp. \end{DoxyCompactList}\item 
int \hyperlink{Client_2READ_8c_afc0e31d500c5ae7b2a0f1aaa5a4ab78b}{append\+Read\+Request} (\hyperlink{structMyDFSId}{My\+D\+F\+S\+Id} $\ast$id, int pos, int size)
\begin{DoxyCompactList}\small\item\em Aggiunge un nodo alla lista di reads. \end{DoxyCompactList}\item 
int \hyperlink{Client_2READ_8c_aa4b63039ca9686f5666ce6bbb33317d7}{mydfs\+\_\+read} (\hyperlink{structMyDFSId}{My\+D\+F\+S\+Id} $\ast$id, int pos, void $\ast$ptr, unsigned int size)
\begin{DoxyCompactList}\small\item\em name\+: mydfs\+\_\+read \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Documentazione delle funzioni}
\hypertarget{Client_2READ_8c_afc0e31d500c5ae7b2a0f1aaa5a4ab78b}{\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}!append\+Read\+Request@{append\+Read\+Request}}
\index{append\+Read\+Request@{append\+Read\+Request}!Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
\subsubsection[{append\+Read\+Request}]{\setlength{\rightskip}{0pt plus 5cm}int append\+Read\+Request (
\begin{DoxyParamCaption}
\item[{{\bf My\+D\+F\+S\+Id} $\ast$}]{id, }
\item[{int}]{pos, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{Client_2READ_8c_afc0e31d500c5ae7b2a0f1aaa5a4ab78b}


Aggiunge un nodo alla lista di reads. 

\begin{DoxyReturn}{Restituisce}
0 Se tutto e' andato bene 

1 errore 
\end{DoxyReturn}


Referenzia Read\+Op\+::next, Read\+Op\+::pos, My\+D\+F\+S\+Id\+::read\+List\+Mutex, e Read\+Op\+::size.



Referenziato da mydfs\+\_\+read().

\hypertarget{Client_2READ_8c_ad48e629c770d8352db6aa53fcbc3ece7}{\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}!byte\+Mancanti@{byte\+Mancanti}}
\index{byte\+Mancanti@{byte\+Mancanti}!Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
\subsubsection[{byte\+Mancanti}]{\setlength{\rightskip}{0pt plus 5cm}int byte\+Mancanti (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{fp}
\end{DoxyParamCaption}
)}}\label{Client_2READ_8c_ad48e629c770d8352db6aa53fcbc3ece7}


Torna il numero di byte prima della fine del file puntato da fp. 

\hypertarget{Client_2READ_8c_aa4b63039ca9686f5666ce6bbb33317d7}{\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}!mydfs\+\_\+read@{mydfs\+\_\+read}}
\index{mydfs\+\_\+read@{mydfs\+\_\+read}!Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
\subsubsection[{mydfs\+\_\+read}]{\setlength{\rightskip}{0pt plus 5cm}int mydfs\+\_\+read (
\begin{DoxyParamCaption}
\item[{{\bf My\+D\+F\+S\+Id} $\ast$}]{id, }
\item[{int}]{pos, }
\item[{void $\ast$}]{ptr, }
\item[{unsigned int}]{size}
\end{DoxyParamCaption}
)}}\label{Client_2READ_8c_aa4b63039ca9686f5666ce6bbb33317d7}


name\+: mydfs\+\_\+read 


\begin{DoxyParams}{Parametri}
{\em id} & L' id del file da cui vuole leggere. \\
\hline
{\em pos} & Posizione da cui vuole leggere (una delle seek). \\
\hline
{\em ptr} & puntatore al buffer in cui andra a legere \\
\hline
{\em size} & quanto vuole leggere \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Restituisce}
-\/1 in caso di errore, n bytes letti altrimenti.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000002}{Da fare}]per qualche motivo, la fread ritorna 0 O\+\_\+o pero' tipo la copia in un altro file sembra funzionare. \end{DoxyRefDesc}


Referenzia append\+Read\+Request(), My\+D\+F\+S\+Id\+::fp, log\+M(), Cache\+Request\+::pos, read\+From(), read\+Request(), e send\+Read\+Command().



Referenziato da main(), e test\+Write().

\hypertarget{Client_2READ_8c_a0b8dfa171c3b5c784fb6cba643728110}{\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}!read\+From@{read\+From}}
\index{read\+From@{read\+From}!Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
\subsubsection[{read\+From}]{\setlength{\rightskip}{0pt plus 5cm}int read\+From (
\begin{DoxyParamCaption}
\item[{{\bf My\+D\+F\+S\+Id} $\ast$}]{id, }
\item[{int}]{size\+Rimasta, }
\item[{int}]{pos}
\end{DoxyParamCaption}
)}}\label{Client_2READ_8c_a0b8dfa171c3b5c784fb6cba643728110}


Legge dalla socket di trasferimento buffsize dati. 

\begin{DoxyReturn}{Restituisce}
1 se c'e' un errore con la recv il risultato di write\+Cache altrimenti.
\end{DoxyReturn}
\begin{DoxySeeAlso}{Si veda anche}
\hyperlink{Cache_8h_a686e517ab500f68c40c03bfbc3e2e2fd}{write\+Cache} 
\end{DoxySeeAlso}
\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000003}{Da fare}]La recv dovrebbe continuare finche' non ho tutto size\+Riamsta. \end{DoxyRefDesc}


Referenzia My\+D\+F\+S\+Id\+::socket\+Id, e write\+Cache().



Referenziato da mydfs\+\_\+read().

\hypertarget{Client_2READ_8c_a34f4cc3ee1ace86747c737cad2d801e7}{\index{Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}!send\+Read\+Command@{send\+Read\+Command}}
\index{send\+Read\+Command@{send\+Read\+Command}!Client/\+R\+E\+A\+D.\+c@{Client/\+R\+E\+A\+D.\+c}}
\subsubsection[{send\+Read\+Command}]{\setlength{\rightskip}{0pt plus 5cm}int send\+Read\+Command (
\begin{DoxyParamCaption}
\item[{{\bf My\+D\+F\+S\+Id} $\ast$}]{id, }
\item[{int}]{pos}
\end{DoxyParamCaption}
)}}\label{Client_2READ_8c_a34f4cc3ee1ace86747c737cad2d801e7}


Manda il comando di R\+E\+A\+D, e aspetta come risposta la dimensione di quanto deve leggere all'interno della risposta. 



Referenzia get\+Number\+Lenght(), log\+M(), R\+E\+A\+D\+C\+O\+M\+M\+A\+N\+D, e My\+D\+F\+S\+Id\+::socket\+Id.



Referenziato da mydfs\+\_\+read().

