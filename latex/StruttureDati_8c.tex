\hypertarget{StruttureDati_8c}{}\section{Riferimenti per il file Server/\+Strutture\+Dati.c}
\label{StruttureDati_8c}\index{Server/\+Strutture\+Dati.\+c@{Server/\+Strutture\+Dati.\+c}}


Contiene funzioni utilizzate per caricare il file di configurazione.  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$sys/mman.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$semaphore.\+h$>$}\\*
{\ttfamily \#include $<$sys/wait.\+h$>$}\\*
{\ttfamily \#include $<$sys/socket.\+h$>$}\\*
{\ttfamily \#include $<$pthread.\+h$>$}\\*
{\ttfamily \#include \char`\"{}inc/\+Config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}inc/\+Strutture\+Dati.\+h\char`\"{}}\\*
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{StruttureDati_8c_a2a0d14b97e3ebef118d2d1420c51f429}{alloca\+E\+Inizializza\+Memoria} ()
\begin{DoxyCompactList}\small\item\em Alloca la memoria necessaria per gestire le strutture dati. \end{DoxyCompactList}\item 
int \hyperlink{StruttureDati_8c_af12cb4139a20c87eb79ea97af2d5a780}{append\+Opened\+File} (char $\ast$nome\+File, int modo, int socket)
\begin{DoxyCompactList}\small\item\em Aggiunge l\textquotesingle{} oggetto in input alla fine della lista linkata dei file aperti \hyperlink{structOpenedFile}{Opened\+File}. \end{DoxyCompactList}\item 
int \hyperlink{StruttureDati_8c_a8d682a78857ccfdbe53092dab0a6cd4b}{file\+Already\+Opened\+In\+Write} (char $\ast$filename, int modo\+\_\+client, int socket\+Id)
\begin{DoxyCompactList}\small\item\em Controlla se un file con quel nome e\textquotesingle{} gia\textquotesingle{} stato aperto in una modalita\textquotesingle{} che non permette l\textquotesingle{}accesso da parte di altri client. \end{DoxyCompactList}\item 
int \hyperlink{StruttureDati_8c_a6e2594e56afc29e961a1797a0bd8d262}{is\+Modo\+Apertura} (int modo\+\_\+client, int modo)
\begin{DoxyCompactList}\small\item\em Dice se modo\+\_\+client contiene il modo modo. \end{DoxyCompactList}\item 
void \hyperlink{StruttureDati_8c_a8de81927bc9aec9d97034dd3e4cda612}{close\+Client\+Session} (int \hyperlink{server_8c_a06b0afe769d54ae94259d8532bc878b0}{sd}, char $\ast$file\+Name)
\begin{DoxyCompactList}\small\item\em rimuove collegamenti tra client e file aperti nella sessione \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variabili}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structOpenedFile}{Opened\+File} $\ast$$\ast$ \hyperlink{StruttureDati_8c_ac6c781406efae2362705c3a19a96474a}{opened\+File\+Linked\+List} = N\+U\+L\+L
\item 
\hyperlink{structOpenedFile}{Opened\+File} $\ast$$\ast$ \hyperlink{StruttureDati_8c_a7ed27afe1793bab93e0646228dd26ce3}{free\+\_\+head}
\end{DoxyCompactItemize}


\subsection{Descrizione dettagliata}
Contiene funzioni utilizzate per caricare il file di configurazione. 

Contiene le funzioni di utilita\textquotesingle{} per le Strutture Dati.

\begin{DoxyAuthor}{Autore}
Federico Ponzi 
\end{DoxyAuthor}
\begin{DoxyDate}{Data}
18.\+07.\+2015
\end{DoxyDate}
\begin{DoxyAuthor}{Autore}
Federico Ponzi 
\end{DoxyAuthor}
\begin{DoxyDate}{Data}
11.\+07.\+2015 
\end{DoxyDate}
\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000004}{Da fare}]Una struttura dati che contenga una lista di sockets 

Remove e add di una socket nella lista di sockets, remove di un file dalla lista di file aperti. N\+O\+T\+A\+: Ricordarsi di eseguire una free() dei Opened\+File-\/$>$file\+Name perch√® viene allocata con una malloc in \hyperlink{OPE_8c}{O\+P\+E.\+c}\end{DoxyRefDesc}


Contiene tutte le funzioni utili per lavorare con le strutture dati definite nell\textquotesingle{} header di questo modulo. 

\subsection{Documentazione delle funzioni}
\hypertarget{StruttureDati_8c_a2a0d14b97e3ebef118d2d1420c51f429}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!alloca\+E\+Inizializza\+Memoria@{alloca\+E\+Inizializza\+Memoria}}
\index{alloca\+E\+Inizializza\+Memoria@{alloca\+E\+Inizializza\+Memoria}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{alloca\+E\+Inizializza\+Memoria}]{\setlength{\rightskip}{0pt plus 5cm}void alloca\+E\+Inizializza\+Memoria (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{StruttureDati_8c_a2a0d14b97e3ebef118d2d1420c51f429}


Alloca la memoria necessaria per gestire le strutture dati. 

\begin{DoxyRefDesc}{Da fare}
\item[\hyperlink{todo__todo000005}{Da fare}]Dovrebbe trovarsi dentro al Config.\+c \end{DoxyRefDesc}
Indirizzo di serverconnectionsstruct 

Referenzia accept\+Mutex, log\+M(), Opened\+File\+::next, number\+Alive\+Childs, numero\+Con, e opened\+File\+Linked\+List.



Referenziato da load\+Config().

\hypertarget{StruttureDati_8c_af12cb4139a20c87eb79ea97af2d5a780}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!append\+Opened\+File@{append\+Opened\+File}}
\index{append\+Opened\+File@{append\+Opened\+File}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{append\+Opened\+File}]{\setlength{\rightskip}{0pt plus 5cm}int append\+Opened\+File (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nome\+File, }
\item[{int}]{modo, }
\item[{int}]{socket}
\end{DoxyParamCaption}
)}\label{StruttureDati_8c_af12cb4139a20c87eb79ea97af2d5a780}


Aggiunge l\textquotesingle{} oggetto in input alla fine della lista linkata dei file aperti \hyperlink{structOpenedFile}{Opened\+File}. 

Se non esiste la radice main\+File la crea. Altrimenti scorre tutti i nodi fino ad arrivare all\textquotesingle{} elemento in coda, crea un nuovo nodo con i dati in input e lo appende alla fine. 

Referenzia file\+Already\+Opened\+In\+Write(), Opened\+File\+::file\+Name, free\+\_\+head, log\+M(), Opened\+File\+::modo, Opened\+File\+::next, opened\+File\+Linked\+List, e Opened\+File\+::socket\+Id.



Referenziato da handle\+Open\+Command().

\hypertarget{StruttureDati_8c_a8de81927bc9aec9d97034dd3e4cda612}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!close\+Client\+Session@{close\+Client\+Session}}
\index{close\+Client\+Session@{close\+Client\+Session}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{close\+Client\+Session}]{\setlength{\rightskip}{0pt plus 5cm}void close\+Client\+Session (
\begin{DoxyParamCaption}
\item[{int}]{sd, }
\item[{char $\ast$}]{file\+Name}
\end{DoxyParamCaption}
)}\label{StruttureDati_8c_a8de81927bc9aec9d97034dd3e4cda612}


rimuove collegamenti tra client e file aperti nella sessione 


\begin{DoxyParams}{Parametri}
{\em int} & sd socket descriptor del client \\
\hline
\end{DoxyParams}


Referenzia Opened\+File\+::file\+Name, free\+\_\+head, log\+M(), Opened\+File\+::next, opened\+File\+Linked\+List, Opened\+File\+::socket\+Id, e T\+R\+U\+E.



Referenziato da handle\+Close\+Command().

\hypertarget{StruttureDati_8c_a8d682a78857ccfdbe53092dab0a6cd4b}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!file\+Already\+Opened\+In\+Write@{file\+Already\+Opened\+In\+Write}}
\index{file\+Already\+Opened\+In\+Write@{file\+Already\+Opened\+In\+Write}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{file\+Already\+Opened\+In\+Write}]{\setlength{\rightskip}{0pt plus 5cm}int file\+Already\+Opened\+In\+Write (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{int}]{modo\+\_\+client, }
\item[{int}]{socket\+Id}
\end{DoxyParamCaption}
)}\label{StruttureDati_8c_a8d682a78857ccfdbe53092dab0a6cd4b}


Controlla se un file con quel nome e\textquotesingle{} gia\textquotesingle{} stato aperto in una modalita\textquotesingle{} che non permette l\textquotesingle{}accesso da parte di altri client. 



Referenzia F\+A\+L\+S\+E, Opened\+File\+::file\+Name, is\+Modo\+Apertura(), log\+M(), Opened\+File\+::modo, M\+Y\+O\+\_\+\+E\+X\+L\+O\+C\+K, M\+Y\+O\+\_\+\+R\+D\+W\+R, M\+Y\+O\+\_\+\+W\+R\+O\+N\+L\+Y, Opened\+File\+::next, e opened\+File\+Linked\+List.



Referenziato da append\+Opened\+File().

\hypertarget{StruttureDati_8c_a6e2594e56afc29e961a1797a0bd8d262}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!is\+Modo\+Apertura@{is\+Modo\+Apertura}}
\index{is\+Modo\+Apertura@{is\+Modo\+Apertura}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{is\+Modo\+Apertura}]{\setlength{\rightskip}{0pt plus 5cm}int is\+Modo\+Apertura (
\begin{DoxyParamCaption}
\item[{int}]{modo\+\_\+client, }
\item[{int}]{modo}
\end{DoxyParamCaption}
)}\label{StruttureDati_8c_a6e2594e56afc29e961a1797a0bd8d262}


Dice se modo\+\_\+client contiene il modo modo. 



Referenzia F\+A\+L\+S\+E, e T\+R\+U\+E.



Referenziato da file\+Already\+Opened\+In\+Write().



\subsection{Documentazione delle variabili}
\hypertarget{StruttureDati_8c_a7ed27afe1793bab93e0646228dd26ce3}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!free\+\_\+head@{free\+\_\+head}}
\index{free\+\_\+head@{free\+\_\+head}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{free\+\_\+head}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Opened\+File}$\ast$$\ast$ free\+\_\+head}\label{StruttureDati_8c_a7ed27afe1793bab93e0646228dd26ce3}


Referenziato da append\+Opened\+File(), e close\+Client\+Session().

\hypertarget{StruttureDati_8c_ac6c781406efae2362705c3a19a96474a}{}\index{Strutture\+Dati.\+c@{Strutture\+Dati.\+c}!opened\+File\+Linked\+List@{opened\+File\+Linked\+List}}
\index{opened\+File\+Linked\+List@{opened\+File\+Linked\+List}!Strutture\+Dati.\+c@{Strutture\+Dati.\+c}}
\subsubsection[{opened\+File\+Linked\+List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Opened\+File}$\ast$$\ast$ opened\+File\+Linked\+List = N\+U\+L\+L}\label{StruttureDati_8c_ac6c781406efae2362705c3a19a96474a}


Referenziato da alloca\+E\+Inizializza\+Memoria(), append\+Opened\+File(), close\+Client\+Session(), e file\+Already\+Opened\+In\+Write().

